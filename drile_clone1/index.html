<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drile- Shop Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f8f8;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 0;
      }
      .gallery-container-wrapper {
        width: 100%;
        margin: auto;
        position: relative;
        overflow: hidden;
      }
      .gallery-inner-scroll {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: hidden;
        -ms-overflow-style: none;
        scrollbar-width: none;
        scroll-behavior: smooth;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }
      .gallery-inner-scroll::-webkit-scrollbar {
        display: none;
      }
      .gallery-item {
        flex: 0 0 auto;
        width: 100%;
        padding: 1rem;
        position: relative;
        border-radius: 0.5rem;
        overflow: hidden;
      }
      .gallery-item img {
        width: 100%;
        height: 18rem;
        object-fit: cover;
        transition: transform 0.3s ease-in-out;
      }

      /* Smooth animation hover overlay styling */
      .card-overlay {
        position: absolute;
        top: 1rem;
        left: 1rem;
        right: 1rem;
        bottom: 1rem;
        background-color: rgba(0, 0, 0, 0.6);
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        border-radius: 0;
        opacity: 0;
        transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        cursor: pointer;
      }
      .card-overlay h2,
      .card-overlay p {
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
      }
      .gallery-item:hover .card-overlay {
        opacity: 1;
        transform: translateY(0);
      }
      .gallery-item:hover .card-overlay h2 {
        font-size: 2rem;
      }
      .gallery-item:hover .card-overlay p {
        font-size: 1rem;
      }
      .card-overlay h2 {
        font-size: 6rem;
        font-weight: 600;
        margin: 0;
        padding-bottom: 0.5rem;
        transition: font-size 0.3s ease-in-out;
      }
      .card-overlay p {
        font-size: 4rem;
        font-weight: 400;
        margin: 0;
        transition: font-size 0.3s ease-in-out;
      }

      /* Ensure the main image doesn't get transformed on hover */
      .gallery-item:hover img {
        transform: none;
      }

      /* Responsive widths for items on larger screens */
      @media (min-width: 768px) {
        .gallery-inner-scroll {
          padding-left: 12.5%;
          padding-right: 12.5%;
        }
        .gallery-item {
          flex: 0 0 33.333%;
        }
        .gallery-item img {
          height: 500px;
        }
      }

      /* Hide and animate the buttons */
      .carousel-control-prev,
      .carousel-control-next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: white;
        color: #6b7280;
        padding: 0.75rem;
        border-radius: 0.25rem;
        border: none;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
        z-index: 10;
        opacity: 0; /* Hidden by default */
        transition: all 0.3s ease-in-out;
        width: 4rem;
        height: 4rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }

      /* Buttons fly in from the left and right */
      .carousel-control-prev {
        left: 0.5rem;
        transform: translateX(-100%) translateY(-50%);
      }
      .carousel-control-next {
        right: 0.5rem;
        transform: translateX(100%) translateY(-50%);
      }

      /* Show buttons on hover of the wrapper */
      .gallery-container-wrapper:hover .carousel-control-prev,
      .gallery-container-wrapper:hover .carousel-control-next {
        opacity: 1;
        transform: translateX(0) translateY(-50%);
      }
    </style>
  </head>
  <body>
    <div class="gallery-container-wrapper">
      <div id="gallery-container" class="gallery-inner-scroll">
        <div class="gallery-item">
          <img
            src="assets/images/accessories.jpg"
            alt="Green plant on a wooden desk"
          />
          <div class="card-overlay">
            <h2>Accessories</h2>
            <p>5 Products</p>
          </div>
        </div>
        <div class="gallery-item">
          <img
            src="assets/images/lamp-1.jpg"
            alt="Vase with branches on a wooden cabinet"
          />
          <div class="card-overlay">
            <h2>Lamp</h2>
            <p>6 Products</p>
          </div>
        </div>
        <div class="gallery-item">
          <img
            src="assets/images/bed-1.jpg"
            alt="Minimalist bed with white sheets"
          />
          <div class="card-overlay">
            <h2>Bedroom</h2>
            <p>12 Products</p>
          </div>
        </div>
        <div class="gallery-item">
          <img
            src="assets/images/chair.jpg"
            alt="Wooden nightstand with a drawer"
          />
          <div class="card-overlay">
            <h2>Chair</h2>
            <p>18 Products</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="assets/images/sofa.jpg" alt="Modern wooden stool" />
          <div class="card-overlay">
            <h2>Sofa</h2>
            <p>8 Products</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="assets/images/table-2.jpg" alt="Abstract art piece" />
          <div class="card-overlay">
            <h2>Table</h2>
            <p>10 Products</p>
          </div>
        </div>
        <div class="gallery-item">
          <img src="assets/images/cabinet.jpg" alt="Stylish chair" />
          <div class="card-overlay">
            <h2>Cabinet</h2>
            <p>5 Products</p>
          </div>
        </div>
      </div>
      <button id="prev-btn" class="carousel-control-prev">
        <span aria-hidden="true">&#10094;</span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button id="next-btn" class="carousel-control-next">
        <span aria-hidden="true">&#10095;</span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdarxHVQGqQ55U6s/d"
      crossorigin="anonymous"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const galleryContainer = document.getElementById("gallery-container");
        const galleryWrapper = document.querySelector(
          ".gallery-container-wrapper"
        );
        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");

        let originalItems = Array.from(
          galleryContainer.querySelectorAll(".gallery-item")
        );
        const totalOriginalItems = originalItems.length;
        const visibleItems = window.innerWidth >= 768 ? 4 : 1;

        let autoSlideInterval;
        const autoSlideIntervalDuration = 3000; // 3 seconds

        let isScrolling = false;

        const getItemWidth = () => {
          const firstItem = galleryContainer.querySelector(".gallery-item");
          return firstItem ? firstItem.offsetWidth : 0;
        };

        const cloneItems = () => {
          galleryContainer
            .querySelectorAll(".cloned")
            .forEach((clone) => clone.remove());

          const startClones = originalItems.slice(-visibleItems).map((item) => {
            const clone = item.cloneNode(true);
            clone.classList.add("cloned");
            return clone;
          });

          const endClones = originalItems.slice(0, visibleItems).map((item) => {
            const clone = item.cloneNode(true);
            clone.classList.add("cloned");
            return clone;
          });

          startClones
            .reverse()
            .forEach((clone) => galleryContainer.prepend(clone));
          endClones.forEach((clone) => galleryContainer.appendChild(clone));
        };

        const handleScrollLooping = () => {
          const itemWidth = getItemWidth();
          const currentScroll = galleryContainer.scrollLeft;

          if (
            currentScroll >=
            (totalOriginalItems + visibleItems) * itemWidth
          ) {
            galleryContainer.style.scrollBehavior = "auto";
            galleryContainer.scrollLeft =
              currentScroll - totalOriginalItems * itemWidth;
          } else if (currentScroll < visibleItems * itemWidth) {
            galleryContainer.style.scrollBehavior = "auto";
            galleryContainer.scrollLeft =
              currentScroll + totalOriginalItems * itemWidth;
          }
        };

        const debounce = (func, delay) => {
          let timeout;
          return function (...args) {
            clearTimeout(timeout);
            timeout = setTimeout(() => {
              func.apply(this, args);
            }, delay);
          };
        };

        const performSlide = (direction) => {
          const itemWidth = getItemWidth();
          const targetScroll =
            galleryContainer.scrollLeft +
            (direction === "next" ? itemWidth : -itemWidth);

          galleryContainer.style.scrollBehavior = "smooth";
          galleryContainer.scrollLeft = targetScroll;
        };

        const handleButtonClick = (direction) => {
          if (isScrolling) return;
          isScrolling = true;

          performSlide(direction);

          setTimeout(() => {
            isScrolling = false;
          }, 300);
        };

        const startAutoSlide = () => {
          stopAutoSlide(); // Clear any existing interval first
          autoSlideInterval = setInterval(() => {
            performSlide("next");
          }, autoSlideIntervalDuration);
        };

        const stopAutoSlide = () => {
          clearInterval(autoSlideInterval);
        };

        const initializeGallery = () => {
          cloneItems();
          const itemWidth = getItemWidth();
          galleryContainer.style.scrollBehavior = "auto";
          galleryContainer.scrollLeft = itemWidth * visibleItems;
          setTimeout(() => {
            galleryContainer.style.scrollBehavior = "smooth";
          }, 100);
        };

        // Event listeners
        nextBtn.addEventListener("click", () => {
          stopAutoSlide();
          handleButtonClick("next");
          startAutoSlide();
        });

        prevBtn.addEventListener("click", () => {
          stopAutoSlide();
          handleButtonClick("prev");
          startAutoSlide();
        });

        galleryWrapper.addEventListener("mouseenter", stopAutoSlide);
        galleryWrapper.addEventListener("mouseleave", startAutoSlide);

        galleryContainer.addEventListener(
          "scroll",
          debounce(handleScrollLooping, 50)
        );

        window.addEventListener("resize", () => {
          isScrolling = true;
          initializeGallery();
          isScrolling = false;
        });

        initializeGallery();
        startAutoSlide();
      });
    </script>
  </body>
</html>
